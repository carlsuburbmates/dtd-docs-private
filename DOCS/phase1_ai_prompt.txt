TASK: Build the Phase 1 backend and core flows for dogtrainersdirectory.com.au (manual-only onboarding, no scraper, no monetization UI yet).

CONTEXT:
- Use `DOCS/blueprint_ssot_v1.1.md` as SSOT (28 councils, 138 suburbs with postcodes/coords, locked enums for ages/issues/services/resources).
- Phase 1 scope only (per `DOCS/ai_agent_execution_v2_corrected.md`): database/auth/triage/search/profiles/manual onboarding + ABN verification; Stripe $20 featured slot is infrastructure-only (no paid UI exposed yet).
- Scraper is deferred to Phase 2; keep any scaffolding behind a feature flag and off by default.
- Monetization UI stays dark until Phase 4+ criteria are met.

OBJECTIVE:
1) Database + Auth:
   - PostgreSQL schema with businesses, trainers, localities (138 suburbs), councils (28), reviews, featured_placements (conceptual), verification fields.
   - Enforce locked enums: ages (5), issues (13), service types (5 primary/secondary), resource types (5). No free-text categories. Age is mandatory for trainers (min 1).
   - Distance function (Haversine) for proximity filtering.
   - Auth: email/password, email verification, trainer owns 0..N businesses.
2) Geography/Data:
   - Import 28 councils + 138 suburbs with postcodes/lat/lon from `DOCS/suburbs_councils_mapping.csv`; derive LGA/region from suburb.
   - Duplicate suburb handling: Eltham→Nillumbik, Emerald→Yarra Ranges; Richmond only City of Yarra; Officer only Cardinia.
3) Dog-owner journey (API/UI skeleton):
   - Age-first triage → issue → suburb autocomplete (138) → results.
   - Results sorted verified first, distance second, rating third; filters for service type, price range, verified-only, distance radius.
   - Trainer profile page with contact buttons (email/phone/website), reviews (paginated), age/issue tags.
   - Emergency pathways (medical/stray/crisis routing) using resource types; emergency resources not shown in trainer directory.
4) Trainer onboarding (manual only):
   - Signup/login with email verification.
   - 6-step profile form: business info (name/phone/email/address/suburb), age specialties (min 1), issues (multi optional), primary service (required) + secondary (optional), formats, bio/pricing.
   - ABN verification with GUID env (`ABR_GUID`), auto-approve ≥85% name match; manual upload fallback; store verification record fields.
   - Dashboard: view/edit profile, see basic stats (views/clicks placeholders OK).
5) Webhooks/Stripe plumbing (infra only for now):
   - Implement a Stripe webhook endpoint with signature verification + idempotency store; expect metadata trainer_id/business_id/lga_id for featured slot purchases.
   - Provide a dev harness config for local testing (`webhook/server_dtd.py` on 127.0.0.1:4243/api/webhooks/stripe-dtd); do not expose paid UI.
6) Admin:
   - Review queue (approve/reject reviews), ABN manual review queue, profile moderation (AI flags optional), emergency resource management.

REQUIREMENTS & CONSTRAINTS:
- Locked enums only; reject invalid values at insert time. Age required for trainers; emergency resources have no age/issues.
- Soft delete only for businesses; never hard-delete.
- Keep scraper feature flag OFF; no scaffolded/unclaimed scraped listings in Phase 1.
- Monetization UI off; featured placements conceptual only. Keys in env; no secrets in repo.
- Use regions: Inner City, Northern, Eastern, South Eastern, Western.
- Performance targets (guidance): profile <1s, directory <2s, autocomplete <200ms.

DELIVERABLES:
- Schema + seed data (councils, suburbs, 50 trainer test records, 10 emergency resources).
- API endpoints + minimal UI to exercise flows (triage/search/profile/onboarding/admin queues).
- Tests for enum validation, distance function, ABN verification flow (mocked), and search filtering.
- Docs/readme for local dev: how to run, how to test Stripe webhooks with the local harness, env vars needed (no secrets checked in).
